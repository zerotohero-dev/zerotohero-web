<!DOCTYPE html> <html lang="en"><head>
<title>vSphere Supervisor Storage</title>
<base href="../../../../../..">
<meta name="pathname" content="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html">
<meta name="description" content="VMware Cloud Foundation - vSphere Supervisor Storage">
<meta property="og:title" content="vSphere Supervisor Storage">
<meta property="og:description" content="VMware Cloud Foundation - vSphere Supervisor Storage">
<meta property="og:type" content="website">
<meta property="og:url" content="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html">
<meta property="og:image" content="assets/vspehere-pod-storage-9dad3179-6c73-4460-ab9d-5578df57a385.webp">
<meta charset="UTF-8"><meta property="og:site_name" content="VMware Cloud Foundation"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager styled-scrollbars show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="vSphere_Supervisor_Storage_0">vSphere Supervisor Storage</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;components, applications, and workloads need to store and retrieve data. Some applications and objects might use transient fast storage, while others require storage that persists.</p></div><div class="el-h2"><h2 data-heading="" dir="auto" class="heading" id="_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span></h2></div><div class="el-p"><p dir="auto">Storage Topologies for vSphere Zones</p></div><div class="el-p"><p dir="auto">A vSphere Zone is a fault domain that can fail independently from another zones.&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;supports different storage topologies for zones. These topologies define how datastores are attached to&nbsp;</p></div><div class="el-p"><p dir="auto">ESX</p></div><div class="el-p"><p dir="auto">&nbsp;hosts and how they behave during zone failures.</p></div><div class="el-p"><p dir="auto">Zonal datastore</p></div><div class="el-p"><p dir="auto">A zonal datastore is local to a single vSphere Zone. It is attached to all the&nbsp;</p></div><div class="el-p"><p dir="auto">ESX</p></div><div class="el-p"><p dir="auto">&nbsp;hosts that are part of the underlying cluster.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p>It can replicate data to provide higher availability within the zone.</p>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>
<p>Its availability depends on the zone. If the zone goes down, the zonal datastore also goes down.</p>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>
<p>Examples of a zonal datatore include: non-stretched vSAN, non-stretched vSAN storage cluster, non-stretched VMFS or NFS external storage.</p>
</li>
</ul></div><div class="el-p"><p dir="auto">Cross-zonal datastore</p></div><div class="el-p"><p dir="auto">A cross-zonal datastore spans multiple vSphere Zones. It is attached to&nbsp;</p></div><div class="el-p"><p dir="auto">ESX</p></div><div class="el-p"><p dir="auto">&nbsp;hosts from all the zones it covers.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p>It can be stretched storage, for example, stretched vSAN, or non-stretched storage that pools hosts from multiple zones, for example, non-stretched vSAN storage cluster.</p>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>
<p>It typically replicates data across zones.</p>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>
<p>It stays available if one of the zones goes down.</p>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>
<p>Examples of a cross-zonal datastore: stretched vSAN, stretched vSAN storage cluster, metro storage cluster, non-stretched vSAN or vSAN storage cluster deployed from hosts across multiple zones.</p>
</li>
</ul></div><div class="el-p"><p dir="auto">When you work with zonal and cross-zonal datastores in&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">, avoid the following misconfigurations:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p>A zonal datastore is attached to other zones.</p>
<p>  Example: A zonal vSAN datastore in Zone 1 is attached to Zone 2 and Zone 3 using vSAN remote datastore.</p>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>
<p>A zonal datastore is only partially attached to&nbsp;</p>
<p>  ESX</p>
<p>  &nbsp;hosts in the zone.</p>
<p>  Example: A vSphere administrator accidentally unmounts a datastore from a host.</p>
<p>  Example: A new host is added to the zone, but the administrator forgets to attach all zonal datastores to it.</p>
</li>
<li data-line="14" dir="auto"><span class="list-bullet"></span>
<p>A cross-zonal datastore is only partially attached to&nbsp;</p>
<p>  ESX</p>
<p>  &nbsp;hosts in multiple zones.</p>
<p>  Example: A datastore is accidentally unmounted from one of the hosts.</p>
<p>  Example: A new host is added to a zone, but the administrator forgets to attach all cross-zonal datastores to it.</p>
</li>
<li data-line="24" dir="auto"><span class="list-bullet"></span>
<p>Editing storage policies to switch between zonal and cross-zonal compatibility.</p>
<p>  This action changes the storage class behavior and affects DevOps.</p>
</li>
<li data-line="28" dir="auto"><span class="list-bullet"></span>
<p>Storage policies that match both zonal and cross-zonal datastores.</p>
<p>  DevOps cannot tell whether the volume they are getting is zonal or cross-zonal.</p>
</li>
</ul></div><div class="el-h2"><h2 data-heading="" dir="auto" class="heading" id="_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span></h2></div><div class="el-p"><p dir="auto">About Storage Policies</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;uses storage policies to integrate with storage available in your vSphere environment. The policies represent datastores and manage storage placement of such components and objects as control plane VMs,&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pod</p></div><div class="el-p"><p dir="auto">&nbsp;ephemeral disks, and container images. You might also need policies for storage placement of persistent volumes and VM content libraries. If you use&nbsp;</p></div><div class="el-p"><p dir="auto">VKS</p></div><div class="el-p"><p dir="auto">&nbsp;clusters, the storage policies also dictate how the&nbsp;</p></div><div class="el-p"><p dir="auto">VKS</p></div><div class="el-p"><p dir="auto">&nbsp;cluster nodes are deployed.</p></div><div class="el-p"><p dir="auto">Storage policies support any shared datastores in your environment, such as VMFS, NFS, vSAN, and vSAN ESA.</p></div><div class="el-p"><p dir="auto">Depending on your vSphere storage environment and the needs of DevOps, you can create several storage policies for different classes of storage. When you enable a&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;and set up vSphere Namespaces, you can assign different storage policies to be used by various objects, components, and workloads.</p></div><div class="el-p"><p dir="auto">For example, if a&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pod</p></div><div class="el-p"><p dir="auto">&nbsp;mounts three types of virtual disks and your vSphere storage environment has three classes of datastores, Bronze, Silver, and Gold, you can create storage policies for all datastores. You can then use the Bronze datastore for ephemeral and container image virtual disks, and use the Silver and Gold datastores for persistent volume virtual disks.</p></div><div class="el-p"><p dir="auto"><span alt="vspehere-pod-storage-9dad3179-6c73-4460-ab9d-5578df57a385.webp" src="assets/vspehere-pod-storage-9dad3179-6c73-4460-ab9d-5578df57a385.webp" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="vspehere-pod-storage-9dad3179-6c73-4460-ab9d-5578df57a385.webp" src="assets/vspehere-pod-storage-9dad3179-6c73-4460-ab9d-5578df57a385.webp" target="_self"></span></p></div><div class="el-h2"><h2 data-heading="Storage Policies for vSphere Zones" dir="auto" class="heading" id="Storage_Policies_for_vSphere_Zones_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Storage Policies for vSphere Zones</h2></div><div class="el-p"><p dir="auto">When you configure storage policies for datastores to be used with zones, follow these best practices:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p>Make sure that a storage policy matchs either zonal datastores only or cross-zonal datastores only. Mixing both in a single policy leads to unpredictable behavior.</p>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>
<p>Use a policy with zonal constraints to target zonal datastores.</p>
<p>  The system guarantees compatibility with zonal datastores and catches any misconfigurations during placement.</p>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>
<p>If you create a policy without zonal constraints to use with zonal datastores, ensure it remains compatible with zonal datastores only.</p>
<p>  You must verify that no cross-zonal datastores match this policy.</p>
</li>
<li data-line="10" dir="auto"><span class="list-bullet"></span>
<p>If you create a policy that matches cross-zonal datastores only, ensure it remains compatible with cross-zonal datastores at all times.</p>
<p>  Prevent any zonal datastore from matching this policy.</p>
</li>
</ul></div><div class="el-h2"><h2 data-heading="Storage Policies for a" dir="auto" class="heading" id="Storage_Policies_for_a_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Storage Policies for a&nbsp;</h2></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">At the&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;level, you configure a storage policy for&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;control plane VMs. In addition, if your deployment supports&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pods</p></div><div class="el-p"><p dir="auto">, you assign storage polices and specify the datastore locations for ephemeral disks and container images. For information about setting storage when enabling&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">, see the&nbsp;</p></div><div class="el-p"><p dir="auto">Installing and Configuring vSphere Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;documentation. To change storage settings, see&nbsp;<a data-tooltip-position="top" aria-label="https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/vsphere-supervisor-installation-and-configuration/configuring-and-managing-a-supervisor-cluster/change-storage-settings-on-the-supervisor-cluster.html" rel="noopener nofollow" class="external-link is-unresolved" href="https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/vsphere-supervisor-installation-and-configuration/configuring-and-managing-a-supervisor-cluster/change-storage-settings-on-the-supervisor-cluster.html" target="_self">Change Storage Settings on the Supervisor</a>.</p></div><div class="el-p"><p dir="auto">Control Plane Storage Policy</p></div><div class="el-p"><p dir="auto">This policy ensures that the control plane VMs are placed on the datastores that the policies represent.</p></div><div class="el-p"><p dir="auto">Ephemeral Virtual Disks</p></div><div class="el-p"><p dir="auto">A&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pod</p></div><div class="el-p"><p dir="auto">&nbsp;requires ephemeral storage to store such Kubernetes objects as logs,&nbsp;</p></div><div class="el-p"><p dir="auto">emptyDir</p></div><div class="el-p"><p dir="auto">&nbsp;volumes, and&nbsp;</p></div><div class="el-p"><p dir="auto">ConfigMaps</p></div><div class="el-p"><p dir="auto">&nbsp;during its operations. This ephemeral, or transient, storage lasts as long as the pod continues to exist. Ephemeral data persists across container restarts, but once the pod reaches the end of its life, the ephemeral virtual disk disappears.</p></div><div class="el-p"><p dir="auto">Each pod has one ephemeral virtual disk. As a vSphere administrator you use a storage policy to define the datastore location for all ephemeral virtual disks when configuring storage for the&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">.</p></div><div class="el-p"><p dir="auto">Container Image Virtual Disks</p></div><div class="el-p"><p dir="auto">Containers inside the&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pod</p></div><div class="el-p"><p dir="auto">&nbsp;use images that contain the software to be run. The pod mounts images used by its containers as image virtual disks. When the pod completes its life cycle, the image virtual disks are detached from the pod.</p></div><div class="el-p"><p dir="auto">Image Service, an&nbsp;</p></div><div class="el-p"><p dir="auto">ESX</p></div><div class="el-p"><p dir="auto">&nbsp;component, is responsible for pulling container images from the image registry and transforming them into virtual disks to run inside the pod.</p></div><div class="el-p"><p dir="auto"><span alt="esx-can-cache-images-966c000f-edb1-4d4e-9c72-c5f571cc1647.original.png" src="assets/esx-can-cache-images-966c000f-edb1-4d4e-9c72-c5f571cc1647.original.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="esx-can-cache-images-966c000f-edb1-4d4e-9c72-c5f571cc1647.original.png" src="assets/esx-can-cache-images-966c000f-edb1-4d4e-9c72-c5f571cc1647.original.png" target="_self"></span></p></div><div class="el-h2"><h2 data-heading="" dir="auto" class="heading" id="_2"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span></h2></div><div class="el-p"><p dir="auto">Persistent Storage for Workloads</p></div><div class="el-p"><p dir="auto">Certain Kubernetes workloads that DevOps run on a namespace require persistent storage to store data permanently.</p></div><div class="el-p"><p dir="auto">Persistent storage can be used by&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Pods</p></div><div class="el-p"><p dir="auto">,&nbsp;</p></div><div class="el-p"><p dir="auto">VKS</p></div><div class="el-p"><p dir="auto">&nbsp;clusters, VMs, and other workloads you run on the namespace. To make persistent storage available to the DevOps team, the vSphere administrator creates storage policies that describe different storage requirements and classes of services. The administrator then assigns storage policies and configures storage limits at a namespace level.</p></div><div class="el-p"><p dir="auto">To understand how&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;works with persistent storage, be familiar with the such essential Kubernetes concepts as storage classes, persistent volumes, and persistent volume claims. For more information, see the Kubernetes documentation at&nbsp;<a rel="noopener nofollow" class="external-link is-unresolved" href="https://kubernetes.io/docs/home/" target="_self">https://kubernetes.io/docs/home/</a>.</p></div><div class="el-p"><p dir="auto">To learn about persistent storage for&nbsp;</p></div><div class="el-p"><p dir="auto">VKS</p></div><div class="el-p"><p dir="auto">&nbsp;clusters, see&nbsp;<a data-tooltip-position="top" aria-label="https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/vsphere-supervisor-installation-and-configuration/vsphere-supervisor-concepts/tanzu-kubernetes-grid-architecture-and-components/storage-for-tanzu-kubernetes-grid-clusters.html#GUID-a1397957-1664-4521-8cf4-4ce025247171-en" rel="noopener nofollow" class="external-link is-unresolved" href="https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/vsphere-supervisor-installation-and-configuration/vsphere-supervisor-concepts/tanzu-kubernetes-grid-architecture-and-components/storage-for-tanzu-kubernetes-grid-clusters.html#GUID-a1397957-1664-4521-8cf4-4ce025247171-en" target="_self">Storage for VKS Clusters</a>.</p></div><div class="el-p"><p dir="auto">For information about using persistent storage, see&nbsp;<a data-tooltip-position="top" aria-label="https://techdocs.broadcom.com/bin/gethidpage?ux-context-string=svservices-4&amp;appid=sv-async&amp;language=&amp;format=rendered" rel="noopener nofollow" class="external-link is-unresolved" href="https://techdocs.broadcom.com/bin/gethidpage?ux-context-string=svservices-4&amp;appid=sv-async&amp;language=&amp;format=rendered" target="_self">Using Persistent Storage with Workloads</a>.</p></div><div class="el-p"><p dir="auto">If your DevOps team plans to deploy third-party services that use&nbsp;</p></div><div class="el-p"><p dir="auto">vSAN Direct</p></div><div class="el-p"><p dir="auto">&nbsp;for their persistent storage needs, see&nbsp;<a data-tooltip-position="top" aria-label="https://techdocs.broadcom.com/bin/gethidpage?ux-context-string=svservices-5&amp;appid=sv-async&amp;language=&amp;format=rendered" rel="noopener nofollow" class="external-link is-unresolved" href="https://techdocs.broadcom.com/bin/gethidpage?ux-context-string=svservices-5&amp;appid=sv-async&amp;language=&amp;format=rendered" target="_self">Enable Stateful Services</a>.</p></div><div class="el-h2"><h2 data-heading="How Supervisor Integrates with vSphere Storage" dir="auto" class="heading" id="How_Supervisor_Integrates_with_vSphere_Storage_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>How Supervisor Integrates with vSphere Storage</h2></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;uses several components to integrate with vSphere storage.</p></div><div class="el-p"><p dir="auto">&nbsp;<br>
<span alt="supervisor-cns-csi-8a7c342c-4c0b-4e84-9ab2-cf06dd7dc420.original.png" src="assets/supervisor-cns-csi-8a7c342c-4c0b-4e84-9ab2-cf06dd7dc420.original.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="supervisor-cns-csi-8a7c342c-4c0b-4e84-9ab2-cf06dd7dc420.original.png" src="assets/supervisor-cns-csi-8a7c342c-4c0b-4e84-9ab2-cf06dd7dc420.original.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">Cloud Native Storage (CNS) on&nbsp;</p></div><div class="el-p"><p dir="auto">vCenter</p></div><div class="el-p"><p dir="auto">The CNS component resides in&nbsp;</p></div><div class="el-p"><p dir="auto">vCenter</p></div><div class="el-p"><p dir="auto">. It is an extension of&nbsp;</p></div><div class="el-p"><p dir="auto">vCenter</p></div><div class="el-p"><p dir="auto">&nbsp;management that implements provisioning and lifecycle operations for persistent volumes.</p></div><div class="el-p"><p dir="auto">When provisioning persistent volumes, the component interacts with the vSphere First Class Disk functionality to create virtual disks that back the volumes. In addition, the CNS server component communicates with the Storage Policy Based Management to guarantee a required level of service to the disks.</p></div><div class="el-p"><p dir="auto">The CNS also performs query operations that allow vSphere administrators to manage and monitor persistent volumes and their backing storage objects through&nbsp;</p></div><div class="el-p"><p dir="auto">vCenter</p></div><div class="el-p"><p dir="auto">.</p></div><div class="el-p"><p dir="auto">First Class Disk (FCD)</p></div><div class="el-p"><p dir="auto">Also called Improved Virtual Disk. These disks reside on datastores and back ReadWriteOnce persistent volumes.</p></div><div class="el-p"><p dir="auto">When you use FCDs, keep in mind the following:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p>FCDs do not support NFS 4.x protocols. Instead, use NFS 3.</p>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>
<p>vCenter</p>
<p>  &nbsp;does not serialize operations on the same FCD. As a result, applications cannot simultaneously perform operations on the same FCD. Performing such operations as clone, relocate, delete, retrieve, and so on simultaneously from different threads causes unpredictable results. To avoid problems, applications must perform operations on the same FCD in a sequential order.</p>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>FCD is not a managed object and does not support a global lock protecting multiple writes to a single FCD. As a result, FCD doesn't support multiple&nbsp;</p>
<p>  vCenter</p>
<p>  &nbsp;instances managing the same FCD. If you need to use multiple&nbsp;</p>
<p>  vCenter</p>
<p>  &nbsp;instances with FCDs, you have the following options:</p>
<ul class="has-list-bullet">
<li data-line="16" dir="auto"><span class="list-bullet"></span>
<p>Multiple&nbsp;</p>
<p>  vCenter</p>
<p>  &nbsp;instances can manage different datastores.</p>
</li>
<li data-line="22" dir="auto"><span class="list-bullet"></span>
<p>Multiple&nbsp;</p>
<p>  vCenter</p>
<p>  &nbsp;instances do not operate on the same FCD.</p>
</li>
</ul>
</li>
</ul></div><div class="el-p"><p dir="auto">Storage Policy Based Management</p></div><div class="el-p"><p dir="auto">Storage Policy Based Management is a&nbsp;</p></div><div class="el-p"><p dir="auto">vCenter</p></div><div class="el-p"><p dir="auto">&nbsp;service that supports provisioning of persistent volumes and their backing virtual disks according to storage requirements described in a storage policy. After provisioning, the service monitors compliance of the volume with the storage policy characteristics. For more information about Storage Policy Based Management, see the&nbsp;</p></div><div class="el-p"><p dir="auto">About Storage Policy Based Management</p></div><div class="el-p"><p dir="auto">&nbsp;chapter in the&nbsp;</p></div><div class="el-p"><p dir="auto">vSphere Storage</p></div><div class="el-p"><p dir="auto">&nbsp;documentation.</p></div><div class="el-p"><p dir="auto">vSphere CNS-CSI</p></div><div class="el-p"><p dir="auto">The vSphere CNS-CSI component conforms to Container Storage Interface (CSI) specification, an industry standard designed to provide an interface that container orchestrators like Kubernetes use to provision persistent storage. The CNS-CSI driver runs in the&nbsp;</p></div><div class="el-p"><p dir="auto">Supervisor</p></div><div class="el-p"><p dir="auto">&nbsp;and connects vSphere storage to Kubernetes environment on a namespace. The vSphere CNS-CSI communicates directly with the CNS component for all storage provisioning requests that originate from the namespace.</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#vSphere_Supervisor_Storage_0" data-path="#vSphere_Supervisor_Storage_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="vSphere Supervisor Storage">vSphere Supervisor Storage</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#_0" data-path="#_0"><div class="tree-item-inner heading-link" heading-name=""></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#_1" data-path="#_1"><div class="tree-item-inner heading-link" heading-name=""></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#Storage_Policies_for_vSphere_Zones_0" data-path="#Storage_Policies_for_vSphere_Zones_0"><div class="tree-item-inner heading-link" heading-name="Storage Policies for vSphere Zones">Storage Policies for vSphere Zones</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#Storage_Policies_for_a_0" data-path="#Storage_Policies_for_a_0"><div class="tree-item-inner heading-link" heading-name="Storage Policies for a">Storage Policies for a</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#_2" data-path="#_2"><div class="tree-item-inner heading-link" heading-name=""></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="vcf/core-runtimes/vsphere/platform-extensions/vsphere-supervisor/supervisor-internals-and-platform-integration/vsphere-supervisor-storage.html#How_Supervisor_Integrates_with_vSphere_Storage_0" data-path="#How_Supervisor_Integrates_with_vSphere_Storage_0"><div class="tree-item-inner heading-link" heading-name="How Supervisor Integrates with vSphere Storage">How Supervisor Integrates with vSphere Storage</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>